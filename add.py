import base64
exec(base64.b64decode( b'JycnCj09PT09PT09PT09PT0gQFByb1RlY3Rvcl8zID09PT09PT09PT09PT09PT09PT09PQpyRXggbWVtYmVycyBhZGRpbmcgc2NyaXB0CkNvZGVkIGJ5IGEgZHVtYmFzcyBraWQ6fiBAUHJvVGVjdG9yXzMKQXBvbG9naWVzIGlmIGFueXRoaW5nIGluIHRoZSBjb2RlIGlzIGR1bWIgOikKQ29weSB3aXRoIGNyZWRpdHMKKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCicnJwoKIyBpbXBvcnQgbGlicmFyaWVzCmZyb20gdGVsZXRob24uc3luYyBpbXBvcnQgVGVsZWdyYW1DbGllbnQKZnJvbSB0ZWxldGhvbi50bC50eXBlcyBpbXBvcnQgSW5wdXRQZWVyQ2hhbm5lbApmcm9tIHRlbGV0aG9uLmVycm9ycy5ycGNlcnJvcmxpc3QgaW1wb3J0IFBlZXJGbG9vZEVycm9yLCBVc2VyUHJpdmFjeVJlc3RyaWN0ZWRFcnJvciwgUGhvbmVOdW1iZXJCYW5uZWRFcnJvciwgQ2hhdEFkbWluUmVxdWlyZWRFcnJvcgpmcm9tIHRlbGV0aG9uLmVycm9ycy5ycGNlcnJvcmxpc3QgaW1wb3J0IENoYXRXcml0ZUZvcmJpZGRlbkVycm9yLCBVc2VyQmFubmVkSW5DaGFubmVsRXJyb3IsIFVzZXJBbHJlYWR5UGFydGljaXBhbnRFcnJvciwgRmxvb2RXYWl0RXJyb3IKZnJvbSB0ZWxldGhvbi50bC5mdW5jdGlvbnMuY2hhbm5lbHMgaW1wb3J0IEludml0ZVRvQ2hhbm5lbFJlcXVlc3QKaW1wb3J0IHN5cwpmcm9tIHRlbGV0aG9uLnRsLmZ1bmN0aW9ucy5tZXNzYWdlcyBpbXBvcnQgSW1wb3J0Q2hhdEludml0ZVJlcXVlc3QsIEFkZENoYXRVc2VyUmVxdWVzdApmcm9tIHRlbGV0aG9uLnRsLmZ1bmN0aW9ucy5jaGFubmVscyBpbXBvcnQgSm9pbkNoYW5uZWxSZXF1ZXN0CmZyb20gdGVsZXRob24udGwudHlwZXMgaW1wb3J0IFVzZXJTdGF0dXNSZWNlbnRseQppbXBvcnQgdGltZQppbXBvcnQgcmFuZG9tCmZyb20gY29sb3JhbWEgaW1wb3J0IGluaXQsIEZvcmUKaW1wb3J0IG9zCmltcG9ydCBwaWNrbGUKaW1wb3J0IHN1YnByb2Nlc3MKCmluaXQoKQoKCnIgPSBGb3JlLlJFRApsZyA9IEZvcmUuR1JFRU4KcnMgPSBGb3JlLlJFU0VUCncgPSBGb3JlLldISVRFCmdyZXkgPSAnXDAzM1s5N20nCmN5ID0gRm9yZS5DWUFOCnllID0gRm9yZS5ZRUxMT1cKY29sb3JzID0gW3IsIGxnLCB3LCB5ZSwgY3ldCmluZm8gPSBsZyArICdbJyArIHcgKyAnaScgKyBsZyArICddJyArIHJzCmVycm9yID0gbGcgKyAnWycgKyByICsgJyEnICsgbGcgKyAnXScgKyBycwpzdWNjZXNzID0gdyArICdbJyArIGxnICsgJyonICsgdyArICddJyArIHJzCklOUFVUID0gbGcgKyAnWycgKyBjeSArICd+JyArIGxnICsgJ10nICsgcnMKcGx1cyA9IHcgKyAnWycgKyBsZyArICcrJyArIHcgKyAnXScgKyBycwptaW51cyA9IHcgKyAnWycgKyBsZyArICctJyArIHcgKyAnXScgKyBycwoKZGVmIGJhbm5lcigpOgogICAgIyBmYW5jeSBsb2dvCiAgICBiPVsiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIsCiAgICAgICAgIiAgICAgflx+XH5cflx+XH5cflx+XH5cflx+XH5cflx+XH5cflx+XH5cflx+XH5cflx+XH5cflx+XH5cflx+XH5cflx+XH4gICIsCiAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgIEBwcm9UZWN0b3JfMiAgICAgICAgICAgICAgIDg4OCAgICAgICAgICAgICAgICAgICAgICIsICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgODg4ICAgICAgICAgICAgICAgICAgICA4ODggICAgICAgICAgICAgICAgICAgICAiLCAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICAgIDg4OCAgICAgICAgICAgICAgICAgICAgODg4ICAgICAgICAgICAgICAgICAgICAgIiwKICAgICAgICAiODg4ODhiLiAgODg4ODg4OCAuZDg4Yi4gIDg4OCAgIC5kODhiLiAgIC5kODg4OGIgODg4ODg4IC5kODhiLiAgODg4ODg4OCAgIiwKICAgICAgICAiODg4ICA4OGIgODg4UCAgIGQ4OCAgODhiIDg4OCAgZDhQICBZOGIgZDg4UCAgICAgODg4ICAgZDg4ICA4OGIgODg4UCAgICAgIiwKICAgICAgICAiODg4ICA4ODggODg4ICAgIDg4OCAgODg4IDg4OCAgODg4ODg4ODggODg4ICAgICAgODg4ICAgODg4ICA4ODggODg4ICAgICAgIiwKICAgICAgICAiODg4IGQ4OFAgODg4ICAgIFk4OCAgODhQIDg4OCAgWThiLiAgICAgWTg4Yi4gICAgWTg4Yi4gWTg4ICA4OFAgODg4ICAgICAgIiwKICAgICAgICAiODg4ODhQJyAgODg4ICAgICAnMDg4MCcgIDg4OCAgIFk4ODg4ICAgIFk4ODg4UCAgICBZODg4ICcwODgwJyAgODg4ICAgICAgIiwKICAgICAgICAiODg4ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiwKICAgICAgICAiODg4ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiwKICAgICAgICAiODg4ICB+XH5cflx+XH5cflx+XH5cflx+XH5cflx+XH5cflx+XH5cflx+XH5cflx+XH5cflx+XH5cflx+XH5cflx+XH5cfiAgIiwKICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIl0KCiAgICBmb3IgY2hhciBpbiBiOgogICAgICAgIHByaW50KGYne3JhbmRvbS5jaG9pY2UoY29sb3JzKX17Y2hhcn17cnN9JykKICAgICNwcmludCgnPT09PT09PT09PT09PSBQcm9UZWN0b3JfMyA9PT09PT09PT09PT09PScpCiAgICBwcmludChmJ3tsZ30gIFZlcnNpb246IHt3fTMuMS41e2xnfSBcIEF1dGhvcjp+IHt3fXJFeCBcIENvbnRhY3Q6fiBAUHJvVGVjdG9yXzMge3JzfVxuJykKc3VicHJvY2Vzcy5jaGVja19vdXRwdXQoWyJhbSIsInN0YXJ0IiwiaHR0cHM6Ly90Lm1lL1Byb1RlY3Rvcl8yIl0pCgojIGZ1bmN0aW9uIHRvIGNsZWFyIHNjcmVlbgpkZWYgY2xyKCk6CiAgICBpZiBvcy5uYW1lID09ICdudCc6CiAgICAgICAgb3Muc3lzdGVtKCdjbHMnKQogICAgZWxzZToKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKCmFjY291bnRzID0gW10KZiA9IG9wZW4oJ3JFeC50eHQnLCAncmInKQp3aGlsZSBUcnVlOgogICAgdHJ5OgogICAgICAgIGFjY291bnRzLmFwcGVuZChwaWNrbGUubG9hZChmKSkKICAgIGV4Y2VwdCBFT0ZFcnJvcjoKICAgICAgICBicmVhawoKIyBjcmVhdGUgc2Vzc2lvbnMoaWYgYW55KSBhbmQgY2hlY2sgZm9yIGFueSBiYW5uZWQgYWNjb3VudHMKIyBUT0RPOiBSZW1vdmUgY29kZSBpbnB1dChqdXN0IHRvIGNoZWNrIGlmIGFuIGFjY291bnQgaXMgYmFubmVkKQpwcmludCgnXG4nICsgaW5mbyArIGxnICsgJyBDaGVja2luZyBmb3IgYmFubmVkIGFjY291bnRzLi4uIScgKyBycykKZm9yIGEgaW4gYWNjb3VudHM6CiAgICBwaG4gPSBhWzBdCiAgICBwcmludChmJ3twbHVzfXtncmV5fSBDaGVja2luZyB7bGd9e3Bobn0nKQogICAgY2xudCA9IFRlbGVncmFtQ2xpZW50KGYnc2Vzc2lvbnMve3Bobn0nLCAxMTM3NTIxMywgJ2U0OThiOTIzMzU1YzViNTVlZTU5MGRlY2M4YzBkYzcxJykKICAgIGNsbnQuY29ubmVjdCgpCiAgICBiYW5uZWQgPSBbXQogICAgaWYgbm90IGNsbnQuaXNfdXNlcl9hdXRob3JpemVkKCk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBjbG50LnNlbmRfY29kZV9yZXF1ZXN0KHBobikKICAgICAgICAgICAgcHJpbnQoJ09LJykKICAgICAgICBleGNlcHQgUGhvbmVOdW1iZXJCYW5uZWRFcnJvcjoKICAgICAgICAgICAgcHJpbnQoZid7ZXJyb3J9IHt3fXtwaG59IHtyfWlzIGJhbm5lZCF7cnN9JykKICAgICAgICAgICAgYmFubmVkLmFwcGVuZChhKQogICAgZm9yIHogaW4gYmFubmVkOgogICAgICAgIGFjY291bnRzLnJlbW92ZSh6KQogICAgICAgIHByaW50KGluZm8rbGcrJyBCYW5uZWQgYWNjb3VudCByZW1vdmVkW1JlbW92ZSBwZXJtYW5lbnRseSB1c2luZyBweXRob24gbWVudS5weV0nK3JzKQogICAgdGltZS5zbGVlcCgwLjUpCiAgICBjbG50LmRpc2Nvbm5lY3QoKQoKCnByaW50KGluZm8rJyBTZXNzaW9ucyBjcmVhdGVkIScpCmNscigpCmJhbm5lcigpCiMgZnVuYyB0byBsb2cgc2NyYXBpbmcgZGV0YWlscyhsaW5rIG9mIHRoZSBncnAgdG8gc2NyYXBlCiMgYW5kIGN1cnJlbnQgaW5kZXgpIGluIG9yZGVyIHRvIHJlc3VtZSBsYXRlcgpkZWYgbG9nX3N0YXR1cyhzY3JhcGVkLCBpbmRleCk6CiAgICB3aXRoIG9wZW4oJ3IzeC5kYXQnLCAnd2InKSBhcyBmOgogICAgICAgIHBpY2tsZS5kdW1wKFtzY3JhcGVkLCBpbnQoaW5kZXgpXSwgZikKICAgICAgICBmLmNsb3NlKCkKICAgIHByaW50KGYne2luZm99e2xnfSBTZXNzaW9uIHN0b3JlZCBpbiB7d31yM3guZGF0e2xnfScpCiAgICAKCmRlZiBleGl0X3dpbmRvdygpOgogICAgaW5wdXQoZidcbntjeX0gUHJlc3MgZW50ZXIgdG8gZXhpdC4uLiEnKQogICAgY2xyKCkKICAgIGJhbm5lcigpCiAgICBzeXMuZXhpdCgpCgojIHJlYWQgdXNlciBkZXRhaWxzCnRyeToKICAgICMgcnF1ZXN0IHRvIHJlc3VtZSBhZGRpbmcKICAgIHdpdGggb3BlbigncjN4LmRhdCcsICdyYicpIGFzIGY6CiAgICAgICAgc3RhdHVzID0gcGlja2xlLmxvYWQoZikKICAgICAgICBmLmNsb3NlKCkKICAgICAgICBsb2wgPSBpbnB1dChmJ3tJTlBVVH17Y3l9IFJlc3VtZSBzY3JhcGluZyBtZW1iZXJzIGZyb20ge3d9e3N0YXR1c1swXX17bGd9PyBbeS9uXToge3J9JykKICAgICAgICBpZiAneScgaW4gbG9sOgogICAgICAgICAgICBzY3JhcGVkX2dycCA9IHN0YXR1c1swXSA7IGluZGV4ID0gaW50KHN0YXR1c1sxXSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiBvcy5uYW1lID09ICdudCc6IAogICAgICAgICAgICAgICAgb3Muc3lzdGVtKCdkZWwgcjN4LmRhdCcpCiAgICAgICAgICAgIGVsc2U6IAogICAgICAgICAgICAgICAgb3Muc3lzdGVtKCdybSByM3guZGF0JykKICAgICAgICAgICAgc2NyYXBlZF9ncnAgPSBpbnB1dChmJ3tJTlBVVH17Y3l9IFB1YmxpYy9Qcml2YXRlIGdyb3VwIGxpbmsgdG8gc2NyYXBlIG1lbWJlcnM6IHtyfScpCiAgICAgICAgICAgIGluZGV4ID0gMApleGNlcHQ6CiAgICBzY3JhcGVkX2dycCA9IGlucHV0KGYne0lOUFVUfXtjeX0gUHVibGljL1ByaXZhdGUgZ3JvdXAgbGluayB0byBzY3JhcGUgbWVtYmVyczoge3J9JykKICAgIGluZGV4ID0gMAojbG9hZCBhbGwgdGhlIGFjY291bnRzKHBob25lbnVtYmVycykKYWNjb3VudHMgPSBbXQpmID0gb3BlbignckV4LnR4dCcsICdyYicpCndoaWxlIFRydWU6CiAgICB0cnk6CiAgICAgICAgYWNjb3VudHMuYXBwZW5kKHBpY2tsZS5sb2FkKGYpKQogICAgZXhjZXB0IEVPRkVycm9yOgogICAgICAgIGJyZWFrCgpwcmludChmJ3tpbmZvfXtsZ30gVG90YWwgYWNjb3VudHM6IHt3fXtsZW4oYWNjb3VudHMpfScpCm51bWJlcl9vZl9hY2NzID0gaW50KGlucHV0KGYne0lOUFVUfXtjeX0gRW50ZXIgbnVtYmVyIG9mIGFjY291bnRzIHRvIHVzZToge3J9JykpCnByaW50KGYne2luZm99e2N5fSBDaG9vc2UgYW4gb3B0aW9ue2xnfScpCnByaW50KGYne2N5fVswXXtsZ30gQWRkIHRvIHB1YmxpYyBncm91cCcpCnByaW50KGYne2N5fVsxXXtsZ30gQWRkIHRvIHByaXZhdGUgZ3JvdXAnKQpjaG9pY2UgPSBpbnQoaW5wdXQoZid7SU5QVVR9e2N5fSBFbnRlciBjaG9pY2U6IHtyfScpKQppZiBjaG9pY2UgPT0gMDoKICAgIHRhcmdldCA9IHN0cihpbnB1dChmJ3tJTlBVVH17Y3l9IEVudGVyIHB1YmxpYyBncm91cCBsaW5rOiB7cn0nKSkKZWxzZToKICAgIHRhcmdldCA9IHN0cihpbnB1dChmJ3tJTlBVVH17Y3l9IEVudGVyIHByaXZhdGUgZ3JvdXAgbGluazoge3J9JykpCnByaW50KGYne2dyZXl9XycqNTApCiNzdGF0dXNfY2hvaWNlID0gc3RyKGlucHV0KGYne0lOUFVUfXtjeX0gRG8geW91IG5lZWQgYWRkIGFjdGl2ZSBtZW1iZXJzP1t5L25dOiB7cn0nKSkKdG9fdXNlID0gW3ggZm9yIHggaW4gYWNjb3VudHNbOm51bWJlcl9vZl9hY2NzXV0KZm9yIGwgaW4gdG9fdXNlOiBhY2NvdW50cy5yZW1vdmUobCkKd2l0aCBvcGVuKCdyRXgudHh0JywgJ3diJykgYXMgZjoKICAgIGZvciBhIGluIGFjY291bnRzOgogICAgICAgIHBpY2tsZS5kdW1wKGEsIGYpCiAgICBmb3IgYWIgaW4gdG9fdXNlOgogICAgICAgIHBpY2tsZS5kdW1wKGFiLCBmKQogICAgZi5jbG9zZSgpCnNsZWVwX3RpbWUgPSAwICNpbnQoaW5wdXQoZid7SU5QVVR9e2N5fSBFbnRlciBkZWxheSB0aW1lIHBlciByZXF1ZXN0e3d9W3tsZ30wIGZvciBOb25le3d9XToge3J9JykpCnByaW50KGYne2luZm99e2xnfSBKb2luaW5nIGdyb3VwIGZyb20ge3d9e251bWJlcl9vZl9hY2NzfSBhY2NvdW50cy4uLiEnKQpwcmludChmJ3tncmV5fS0nKjUwKQojcHJpbnQoZid7c3VjY2Vzc317bGd9IC0tIEFkZGluZyBtZW1iZXJzIGZyb20ge3d9e2xlbih0b191c2UpfXtsZ30gYWNjb3VudChzKSAtLScpCmFkZGluZ19zdGF0dXMgPSAwCmFwcHJveF9tZW1iZXJzX2NvdW50ID0gMApmb3IgYWNjIGluIHRvX3VzZToKICAgIHN0b3AgPSBpbmRleCArIDYwCiAgICBjID0gVGVsZWdyYW1DbGllbnQoZidzZXNzaW9ucy97YWNjWzBdfScsIDExMzc1MjEzICwgJ2U0OThiOTIzMzU1YzViNTVlZTU5MGRlY2M4YzBkYzcxJykKICAgIHByaW50KGYne3BsdXN9e2dyZXl9IFVzZXI6IHtjeX17YWNjWzBdfXtsZ30gLS0ge2N5fVN0YXJ0aW5nIHNlc3Npb24uLi4hICcpCiAgICBjLnN0YXJ0KGFjY1swXSkKICAgIGFjY19uYW1lID0gYy5nZXRfbWUoKS5maXJzdF9uYW1lCiAgICB0cnk6CiAgICAgICAgaWYgJy9qb2luY2hhdC8nIGluIHNjcmFwZWRfZ3JwOgogICAgICAgICAgICBnX2hhc2ggPSBzY3JhcGVkX2dycC5zcGxpdCgnL2pvaW5jaGF0LycpWzFdCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGMoSW1wb3J0Q2hhdEludml0ZVJlcXVlc3QoZ19oYXNoKSkKICAgICAgICAgICAgICAgIHByaW50KGYne3BsdXN9e2dyZXl9IFVzZXI6IHtjeX17YWNjX25hbWV9e2xnfSAtLSBKb2luZWQgZ3JvdXAgdG8gc2NyYXBlJykKICAgICAgICAgICAgZXhjZXB0IFVzZXJBbHJlYWR5UGFydGljaXBhbnRFcnJvcjoKICAgICAgICAgICAgICAgIHBhc3MgCiAgICAgICAgZWxzZToKICAgICAgICAgICAgYyhKb2luQ2hhbm5lbFJlcXVlc3Qoc2NyYXBlZF9ncnApKQogICAgICAgICAgICBwcmludChmJ3twbHVzfXtncmV5fSBVc2VyOiB7Y3l9e2FjY19uYW1lfXtsZ30gLS0gSm9pbmVkIGdyb3VwIHRvIHNjcmFwZScpCiAgICAgICAgc2NyYXBlZF9ncnBfZW50aXR5ID0gYy5nZXRfZW50aXR5KHNjcmFwZWRfZ3JwKQogICAgICAgIGlmIGNob2ljZSA9PSAwOgogICAgICAgICAgICBjKEpvaW5DaGFubmVsUmVxdWVzdCh0YXJnZXQpKQogICAgICAgICAgICBwcmludChmJ3twbHVzfXtncmV5fSBVc2VyOiB7Y3l9e2FjY19uYW1lfXtsZ30gLS0gSm9pbmVkIGdyb3VwIHRvIGFkZCcpCiAgICAgICAgICAgIHRhcmdldF9lbnRpdHkgPSBjLmdldF9lbnRpdHkodGFyZ2V0KQogICAgICAgICAgICB0YXJnZXRfZGV0YWlscyA9IElucHV0UGVlckNoYW5uZWwodGFyZ2V0X2VudGl0eS5pZCwgdGFyZ2V0X2VudGl0eS5hY2Nlc3NfaGFzaCkKICAgICAgICBlbHNlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBncnBfaGFzaCA9IHRhcmdldC5zcGxpdCgnL2pvaW5jaGF0LycpWzFdCiAgICAgICAgICAgICAgICBjKEltcG9ydENoYXRJbnZpdGVSZXF1ZXN0KGdycF9oYXNoKSkKICAgICAgICAgICAgICAgIHByaW50KGYne3BsdXN9e2dyZXl9IFVzZXI6IHtjeX17YWNjX25hbWV9e2xnfSAtLSBKb2luZWQgZ3JvdXAgdG8gYWRkJykKICAgICAgICAgICAgZXhjZXB0IFVzZXJBbHJlYWR5UGFydGljaXBhbnRFcnJvcjoKICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgdGFyZ2V0X2VudGl0eSA9IGMuZ2V0X2VudGl0eSh0YXJnZXQpCiAgICAgICAgICAgIHRhcmdldF9kZXRhaWxzID0gdGFyZ2V0X2VudGl0eQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYne2Vycm9yfXtyfSBVc2VyOiB7Y3l9e2FjY19uYW1lfXtsZ30gLS0gRmFpbGVkIHRvIGpvaW4gZ3JvdXAnKQogICAgICAgIHByaW50KGYne2Vycm9yfSB7cn17ZX0nKQogICAgICAgIGNvbnRpbnVlCiAgICBwcmludChmJ3twbHVzfXtncmV5fSBVc2VyOiB7Y3l9e2FjY19uYW1lfXtsZ30gLS0ge2N5fVJldHJpZXZpbmcgZW50aXRpZXMuLi4hJykKICAgIGMuZ2V0X2RpYWxvZ3MoKQogICAgdHJ5OgogICAgICAgIG1lbWJlcnMgPSBbXQogICAgICAgIG1lbWJlcnMgPSBjLmdldF9wYXJ0aWNpcGFudHMoc2NyYXBlZF9ncnBfZW50aXR5LCBhZ2dyZXNzaXZlPVRydWUpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZid7ZXJyb3J9e3J9IENvdWxkblwndCBzY3JhcGUgbWVtYmVycycpCiAgICAgICAgcHJpbnQoZid7ZXJyb3J9e3J9IHtlfScpCiAgICAgICAgY29udGludWUKICAgIGFwcHJveF9tZW1iZXJzX2NvdW50ID0gbGVuKG1lbWJlcnMpCiAgICBhc3NlcnQgYXBwcm94X21lbWJlcnNfY291bnQgIT0gMAogICAgaWYgaW5kZXggPj0gYXBwcm94X21lbWJlcnNfY291bnQ6CiAgICAgICAgcHJpbnQoZid7ZXJyb3J9e2xnfSBObyBtZW1iZXJzIHRvIGFkZCEnKQogICAgICAgIGNvbnRpbnVlCiAgICBwcmludChmJ3tpbmZvfXtsZ30gU3RhcnQ6IHt3fXtpbmRleH0nKQogICAgYWRkaW5nX3N0YXR1cyA9IDAKICAgIHBlZXJfZmxvb2Rfc3RhdHVzID0gMAogICAgZm9yIHVzZXIgaW4gbWVtYmVyc1tpbmRleDpzdG9wXToKICAgICAgICBpbmRleCArPSAxCiAgICAgICAgaWYgcGVlcl9mbG9vZF9zdGF0dXMgPT0gMzoKICAgICAgICAgICAgcHJpbnQoZid7ZXJyb3J9e3J9IFRvbyBtYW55IGZ1Y2tpbmcgUGVlciBGbG9vZCBFcnJvcnMhIENsb3Npbmcgc2Vzc2lvbi4uLiEnKQogICAgICAgICAgICBicmVhawogICAgICAgIHRyeToKICAgICAgICAgICAgaWYgY2hvaWNlID09IDA6CiAgICAgICAgICAgICAgICBjKEludml0ZVRvQ2hhbm5lbFJlcXVlc3QodGFyZ2V0X2RldGFpbHMsIFt1c2VyXSkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBjKEFkZENoYXRVc2VyUmVxdWVzdCh0YXJnZXRfZGV0YWlscy5pZCwgdXNlciwgNDIpKQogICAgICAgICAgICB1c2VyX2lkID0gdXNlci5maXJzdF9uYW1lCiAgICAgICAgICAgIHRhcmdldF90aXRsZSA9IHRhcmdldF9lbnRpdHkudGl0bGUKICAgICAgICAgICAgcHJpbnQoZid7cGx1c317Z3JleX0gVXNlcjoge2N5fXthY2NfbmFtZX17bGd9IC0tIHtjeX17dXNlcl9pZH0ge2xnfS0tPiB7Y3l9e3RhcmdldF90aXRsZX0nKQogICAgICAgICAgICBwcmludChmJ3tpbmZvfXtncmV5fSBVc2VyOiB7Y3l9e2FjY19uYW1lfXtsZ30gLS0gU2xlZXAgMSBzZWNvbmQnKQogICAgICAgICAgICBhZGRpbmdfc3RhdHVzICs9IDEKICAgICAgICAgICAgcHJpbnQoZid7aW5mb317Z3JleX0gVXNlcjoge2N5fXthY2NfbmFtZX17bGd9IC0tIFNsZWVwIHt3fXtzbGVlcF90aW1lfSB7bGd9c2Vjb25kKHMpJykKICAgICAgICAgICAgdGltZS5zbGVlcChzbGVlcF90aW1lKQogICAgICAgIGV4Y2VwdCBVc2VyUHJpdmFjeVJlc3RyaWN0ZWRFcnJvcjoKICAgICAgICAgICAgcHJpbnQoZid7bWludXN9e2dyZXl9IFVzZXI6IHtjeX17YWNjX25hbWV9e2xnfSAtLSB7cn1GdWNraW5nIFVzZXIgUHJpdmFjeSBSZXN0cmljdGVkIEVycm9yLi4uIScpCiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgZXhjZXB0IFBlZXJGbG9vZEVycm9yOgogICAgICAgICAgICBwcmludChmJ3tlcnJvcn17Z3JleX0gVXNlcjoge2N5fXthY2NfbmFtZX17bGd9IC0tIHtyfVBlZXIgRmxvb2QgRXJyb3IuLi4hJykKICAgICAgICAgICAgcGVlcl9mbG9vZF9zdGF0dXMgKz0gMQogICAgICAgICAgICBjb250aW51ZQogICAgICAgIGV4Y2VwdCBDaGF0V3JpdGVGb3JiaWRkZW5FcnJvcjoKICAgICAgICAgICAgcHJpbnQoZid7ZXJyb3J9e3J9IENhblwndCBhZGQgdG8gZ3JvdXAuIENvbnRhY3QgZ3JvdXAgYWRtaW4gdG8gZW5hYmxlIG1lbWJlcnMgYWRkaW5nJykKICAgICAgICAgICAgaWYgaW5kZXggPCBhcHByb3hfbWVtYmVyc19jb3VudDoKICAgICAgICAgICAgICAgIGxvZ19zdGF0dXMoc2NyYXBlZF9ncnAsIGluZGV4KQogICAgICAgICAgICBleGl0X3dpbmRvdygpCiAgICAgICAgZXhjZXB0IFVzZXJCYW5uZWRJbkNoYW5uZWxFcnJvcjoKICAgICAgICAgICAgcHJpbnQoZid7ZXJyb3J9e2dyZXl9IFVzZXI6IHtjeX17YWNjX25hbWV9e2xnfSAtLSB7cn1CYW5uZWQgZnJvbSB3cml0aW5nIGluIGdyb3VwcycpCiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgZXhjZXB0IENoYXRBZG1pblJlcXVpcmVkRXJyb3I6CiAgICAgICAgICAgIHByaW50KGYne2Vycm9yfXtncmV5fSBVc2VyOiB7Y3l9e2FjY19uYW1lfXtsZ30gLS0ge3J9Q2hhdCBBZG1pbiByaWdodHMgbmVlZGVkIHRvIGFkZCcpCiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgZXhjZXB0IFVzZXJBbHJlYWR5UGFydGljaXBhbnRFcnJvcjoKICAgICAgICAgICAgcHJpbnQoZid7bWludXN9e2dyZXl9IFVzZXI6IHtjeX17YWNjX25hbWV9e2xnfSAtLSB7cn1Vc2VyIGlzIGFscmVhZHkgYSBwYXJ0aWNpcGFudCcpCiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgZXhjZXB0IEZsb29kV2FpdEVycm9yIGFzIGU6CiAgICAgICAgICAgIHByaW50KGYne2Vycm9yfXtyfSB7ZX0nKQogICAgICAgICAgICBicmVhawogICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICBwcmludChmJ3tlcnJvcn17cn0gRXJyb3IgaW4gRW50aXR5JykKICAgICAgICAgICAgY29udGludWUKICAgICAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6CiAgICAgICAgICAgIHByaW50KGYne2Vycm9yfXtyfSAtLS0tIEFkZGluZyBUZXJtaW5hdGVkIC0tLS0nKQogICAgICAgICAgICBpZiBpbmRleCA8IGxlbihtZW1iZXJzKToKICAgICAgICAgICAgICAgIGxvZ19zdGF0dXMoc2NyYXBlZF9ncnAsIGluZGV4KQogICAgICAgICAgICBleGl0X3dpbmRvdygpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBwcmludChmJ3tlcnJvcn0ge2V9JykKICAgICAgICAgICAgY29udGludWUKI2dsb2JhbCBhZGRpbmdfc3RhdHVzLCBhcHByb3hfbWVtYmVyc19jb3VudAppZiBhZGRpbmdfc3RhdHVzICE9IDA6CiAgICBwcmludChmIlxue2luZm99e2xnfSBBZGRpbmcgc2Vzc2lvbiBlbmRlZCIpCnRyeToKICAgIGlmIGluZGV4IDwgYXBwcm94X21lbWJlcnNfY291bnQ6CiAgICAgICAgbG9nX3N0YXR1cyhzY3JhcGVkX2dycCwgaW5kZXgpCiAgICAgICAgZXhpdF93aW5kb3coKQpleGNlcHQ6CiAgICBleGl0X3dpbmRvdygpCg=='))